```{=mediawiki}
{{DISPLAYTITLE:i3}}
```
```{=mediawiki}
{{Expansion|there are a lot more [https://search.nixos.org/options/?query=i3 options]}}
```
[i3](https://i3wm.org/) is a tiling window manager for [X Window System](Xorg "wikilink").

## Enabling

To use i3 set `{{nixos:option|services.xserver.windowManager.i3.enable}}`{=mediawiki} to `true`. For example:
`{{file|/etc/nixos/configuration.nix|nix|
<nowiki>
{ config, pkgs, callPackage, ... }: 

{
  ...
  services.xserver = {
    enable = true;

    windowManager.i3 = {
      enable = true;
      extraPackages = with pkgs; [
        dmenu #application launcher most people use
        i3status # gives you the default i3 status bar
        i3lock #default i3 screen locker
     ];
    };
  };
  ...
}
</nowiki>
}}`{=mediawiki}

By default, the path to the i3 configuration file is `$HOME/.i3/config`. For a full list of i3 options, refer to the
`{{nixos:option|services.xserver.windowManager.i3}}`{=mediawiki} module options.

```{=mediawiki}
{{Evaluate}}
```
### Using home-manager {#using_home_manager}

```{=mediawiki}
{{file|/etc/nixos/configuration.nix|nix|
<nowiki>
services.xserver = {
  enable = true;
  windowManager.i3.enable = true;
};
services.displayManager.defaultSession = "none+i3";
</nowiki>
}}
```
```{=mediawiki}
{{file|home.nix|nix|
<nowiki>
xsession.windowManager.i3 = {
  enable = true;
  config = {
    modifier = "Mod4";
    # See home-manager documentation for everything you can add here.
  };
};
</nowiki>
}}
```
See also:
[srid/nix-config/nix/home/i3.nix](https://github.com/srid/nix-config/blob/705a70c094da53aa50cf560179b973529617eb31/nix/home/i3.nix)

### With a desktop manager {#with_a_desktop_manager}

i3 is a window manager and does not provide \"cosmetic\" services like managing multiple monitor configuration or media
keys. This is what is usually delegated to a desktop manager. To use xfce as a desktop manager on top of i3, see
[Xfce#Using_as_a_desktop_manager_and_not_a_window_manager](Xfce#Using_as_a_desktop_manager_and_not_a_window_manager "wikilink").

## Common issues {#common_issues}

### i3lock doesn\'t recognize my password {#i3lock_doesnt_recognize_my_password}

As of nixos 25.05, i3lock is no longer automatically configured to be able to use PAM to check passwords. If you
installed i3 through nixos options, this is handled for you, but if you installed it elsewhere, such as through
home-manager, then at minimum, you need to set:

```{=mediawiki}
{{file|/etc/nixos/configuration.nix|nix|
<nowiki>
security.pam.services.i3lock.enable = true;
</nowiki>
}}
```
## Tips & tricks {#tips_tricks}

### i3blocks

After installing and enabling i3blocks, you may find that i3block does not work. This issue occurs because i3blocks
reads its contents from a hardcoded path in `/etc` by default.

Since in nixos however, these contents are located within the Nix store at a path similar to:

```{=mediawiki}
{{file|Path of i3blocks in nixos|nix|
<nowiki>
  /nix/store/k78nc1bplhy4yjblqwlc14h6rdisix3w-i3blocks-1.4/libexec/i3blocks/[BLOCKS]
</nowiki>
}}
```
Since i3blocks cannot locate this path, you have to create a link to this path by adding this line to configuration.nix
file: `{{file|/etc/nixos/configuration.nix|nix|
<nowiki>
  environment.pathsToLink = [ "/libexec" ];
</nowiki>
}}`{=mediawiki}

After rebuilding the system, you may configure your block like the following: `{{file|~/.config/i3/i3blocks.conf|nix|
<nowiki>
[battery]                                                                                                        
label=âš¡                                                                                                         
command=/run/current-system/sw/libexec/i3blocks/battery                                                          
interval=10                                                                                                      
instance=1 
</nowiki>
}}`{=mediawiki}

### DConf

If your settings aren\'t being saved for some applications (gtk3 applications, firefox), like the size of file selection
windows, or the size of the save dialog, you will need to enable dconf:

```{=mediawiki}
{{file|/etc/nixos/configuration.nix|nix|
<nowiki>
  programs.dconf.enable = true;
</nowiki>
}}
```
### Lxappearance

To change the icon and themes you can install lxappearance:

```{=mediawiki}
{{file|/etc/nixos/configuration.nix|nix|
<nowiki>
environment.systemPackages = with pkgs; [
    #---- i3
    lxappearance
    ...
]
</nowiki>
}}
```
### Solve inconsistency between gtk2 and gtk3 themes {#solve_inconsistency_between_gtk2_and_gtk3_themes}

If enabling **dconf** or installing **Lxappearance** but still see inconsistency between themes, you have to manually
edit their configurations. In fact, It is possible to install some gtk3 themes but when you start another gtk2
application, your theme not effected properly. It\'s because there is no .gtkrc-2.0 in your home directory. First create
it and paste these lines to it:

```{=mediawiki}
{{file|~/.gtkrc-2.0|nix|
<nowiki>
gtk-theme-name="Sierra-compact-light"
gtk-icon-theme-name="ePapirus"
gtk-font-name="Ubuntu 11"
gtk-cursor-theme-name="Deepin"
gtk-cursor-theme-size=0
gtk-toolbar-style=GTK_TOOLBAR_BOTH
gtk-toolbar-icon-size=GTK_ICON_SIZE_LARGE_TOOLBAR
gtk-button-images=1
gtk-menu-images=1
gtk-enable-event-sounds=1
gtk-enable-input-feedback-sounds=1
gtk-xft-antialias=1
gtk-xft-hinting=1
gtk-xft-hintstyle="hintfull"
gtk-xft-rgba="rgb"
gtk-modules="gail:atk-bridge"
</nowiki>
}}
```
Change the options based on your installed themes and icon packs.

### Wallpaper

If `~/.background-image` exists then it will be displayed as a wallpaper. Options
`services.xserver.desktopManager.wallpaper.combineScreens` and `.mode` control exactly how it is displayed.

### i3status with home-manager {#i3status_with_home_manager}

Same as in i3status-rust. Notice: home-manager will not override your existing config, i.e. if the file/folder
`~/.config/i3status/config` is present on your system, there won\'t be any changes after rebuilding.

External resources that can help you with your setup:
[<https://home-manager-options.extranix.com/?query=xsession.windowManager.i3.config>](https://home-manager-options.extranix.com/?query=xsession.windowManager.i3.config)

#### To enable i3status in home-manager and change some basic options: {#to_enable_i3status_in_home_manager_and_change_some_basic_options}

```{=mediawiki}
{{file|home.nix|nix|
<nowiki>
programs.i3status = {

  enable = true;

  general = {
    colors = true;
    color_good = "#98971a";
    color_bad  = "#9d0006";
    interval = 1;
  };
};
</nowiki>
}}
```
#### Adding various modules: {#adding_various_modules}

```{=mediawiki}
{{file|home.nix|nix|
<nowiki>
programs.i3status = {
  ...
  modules = {

    "disk /" = {
       enable = true;
       position = 1;
       settings = {
         format = "FREE: %free";
       };
    };  

    # Current wireless connection (ethernet is pretty much the same)
    "wireless <replace-with-interface-name>" = {
      enable = true;
      position = 2;
      settings = {
        format_up = "W: (%quality at %essid) %ip";
        format_down = "W: down";
      };
    }; 

    # Battery status
    "battery 0" = {
      enable = true;
      position = 4;
      settings = {
        format = "BAT: %status %percentage %remaining %emptytime";
        format_down = "No battery";
        status_chr = "CHR";
        status_bat = "";
        status_unk = "?";
        status_full = "FULL";
        path = "/sys/class/power_supply/BAT1/uevent";
        low_threshold = 10;
      };
    };
  };
};
</nowiki>
}}
```
##### Disabling default i3status modules {#disabling_default_i3status_modules}

After setting up i3status, you may notice it shows two eth- and wifi\'s. To disable `ethernet _first_` and
`wireless _first_`, add the following:

```{=mediawiki}
{{file|home.nix|nix|
<nowiki>
programs.i3status.modules = {
  "wireless _first_" = {
    enable = false;
  };

  "ethernet _first_" = {
    enable = false;
  };
};
</nowiki>
}}
```
### i3status-rust with home-manager {#i3status_rust_with_home_manager}

i3status-rust can be configured through home-manager, but that configuration does not autoamatically update i3 to invoke
i3status-rust. Instead `xsession.windowManager.i3.config.bars` needs to be updated to reference i3status-rust and the
config files that the home-manager config produces. Consider the following setup:

```{=mediawiki}
{{file|home.nix|nix|
<nowiki>
  xsession.windowManager.i3 = {
    enable = true;
    config = {
      bars = [
        {
          position = "top";
          statusCommand = "${pkgs.i3status-rust}/bin/i3status-rs ~/.config/i3status-rust/config-top.toml";
        }
      ];
    };
  };

  programs.i3status-rust = {
    enable = true;
    bars = {
      top = {
        blocks = [
         {
           block = "time";
           interval = 60;
           format = "%a %d/%m %k:%M %p";
         }
       ];
      };
    };
  };
}
</nowiki>
}}
```
[Category:Window managers](Category:Window_managers "wikilink")
[Category:Applications](Category:Applications "wikilink") [Category:Desktop](Category:Desktop "wikilink")
